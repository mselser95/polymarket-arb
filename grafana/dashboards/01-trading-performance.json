{
  "title": "Polymarket Trading Performance",
  "tags": ["polymarket", "arbitrage", "trading", "business"],
  "timezone": "browser",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "10s",
  "templating": {
    "list": [
      {
        "name": "datasource",
        "type": "datasource",
        "query": "prometheus"
      },
      {
        "name": "mode",
        "type": "custom",
        "multi": false,
        "options": [
          {"text": "All", "value": ".*", "selected": true},
          {"text": "Paper", "value": "paper"},
          {"text": "Live", "value": "live"}
        ],
        "current": {"text": "All", "value": ".*"}
      }
    ]
  },
  "panels": [
    {
      "id": 1,
      "title": "Opportunities Detected (Rate)",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
      "targets": [
        {
          "expr": "rate(polymarket_arb_opportunities_detected_total{service=\"arb-bot\"}[1m])",
          "legendFormat": "Opportunities/sec",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "ops",
          "color": {"mode": "palette-classic"}
        }
      }
    },
    {
      "id": 2,
      "title": "Execution Success Rate",
      "type": "gauge",
      "gridPos": {"h": 8, "w": 6, "x": 12, "y": 0},
      "targets": [
        {
          "expr": "rate(polymarket_execution_opportunities_executed_total{service=\"arb-bot\"}[5m]) / rate(polymarket_execution_opportunities_received_total{service=\"arb-bot\"}[5m])",
          "refId": "A"
        }
      ],
      "options": {
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "min": 0,
          "max": 1,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": 0, "color": "red"},
              {"value": 0.5, "color": "orange"},
              {"value": 0.8, "color": "green"}
            ]
          }
        }
      }
    },
    {
      "id": 3,
      "title": "Cumulative Profit (by Mode)",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 6, "x": 18, "y": 0},
      "targets": [
        {
          "expr": "polymarket_execution_profit_realized_usd{mode=~\"$mode\"}",
          "legendFormat": "{{mode}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "currencyUSD",
          "color": {"mode": "palette-classic"}
        }
      }
    },
    {
      "id": 4,
      "title": "Profit Margin Distribution (BPS)",
      "type": "heatmap",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
      "targets": [
        {
          "expr": "rate(polymarket_arb_opportunity_profit_bps_bucket{service=\"arb-bot\"}[1m])",
          "format": "heatmap",
          "legendFormat": "{{le}}",
          "refId": "A"
        }
      ],
      "options": {
        "calculate": true,
        "calculation": {},
        "cellGap": 2,
        "color": {
          "exponent": 0.5,
          "fill": "dark-orange",
          "mode": "scheme",
          "scale": "exponential",
          "scheme": "Spectral",
          "steps": 128
        },
        "yAxis": {
          "axisLabel": "Profit (BPS)",
          "axisPlacement": "left"
        }
      }
    },
    {
      "id": 5,
      "title": "Net Profit After Fees (BPS)",
      "type": "heatmap",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
      "targets": [
        {
          "expr": "rate(polymarket_arb_net_profit_bps_bucket{service=\"arb-bot\"}[1m])",
          "format": "heatmap",
          "legendFormat": "{{le}}",
          "refId": "A"
        }
      ],
      "options": {
        "calculate": true,
        "cellGap": 2,
        "color": {
          "mode": "scheme",
          "scheme": "Greens"
        }
      }
    },
    {
      "id": 6,
      "title": "Trade Size Distribution (USD)",
      "type": "histogram",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 16},
      "targets": [
        {
          "expr": "polymarket_arb_opportunity_size_usd_bucket{service=\"arb-bot\"}",
          "format": "heatmap",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "currencyUSD"
        }
      }
    },
    {
      "id": 7,
      "title": "Opportunities Rejected (by Reason)",
      "type": "piechart",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 16},
      "targets": [
        {
          "expr": "sum by(reason) (polymarket_arb_opportunities_rejected_total{service=\"arb-bot\"})",
          "legendFormat": "{{reason}}",
          "refId": "A"
        }
      ],
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "right",
          "values": ["value", "percent"]
        },
        "pieType": "donut",
        "tooltip": {
          "mode": "single"
        }
      }
    },
    {
      "id": 8,
      "title": "Trades Executed (by Outcome)",
      "type": "stat",
      "gridPos": {"h": 4, "w": 12, "x": 0, "y": 24},
      "targets": [
        {
          "expr": "sum by(outcome) (polymarket_execution_trades_total{mode=~\"$mode\"})",
          "legendFormat": "{{outcome}}",
          "refId": "A"
        }
      ],
      "options": {
        "graphMode": "area",
        "colorMode": "background"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      }
    },
    {
      "id": 9,
      "title": "Markets with Opportunities",
      "type": "stat",
      "gridPos": {"h": 4, "w": 6, "x": 12, "y": 24},
      "targets": [
        {
          "expr": "count(count by(market_slug) (polymarket_arb_opportunities_detected_total{service=\"arb-bot\"}))",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {"mode": "thresholds"},
          "thresholds": {
            "steps": [
              {"value": 0, "color": "red"},
              {"value": 5, "color": "yellow"},
              {"value": 10, "color": "green"}
            ]
          }
        }
      }
    },
    {
      "id": 10,
      "title": "Opportunity Conversion Rate",
      "type": "gauge",
      "gridPos": {"h": 4, "w": 6, "x": 18, "y": 24},
      "targets": [
        {
          "expr": "polymarket_execution_opportunities_executed_total{service=\"arb-bot\"} / polymarket_arb_opportunities_detected_total{service=\"arb-bot\"}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "min": 0,
          "max": 1,
          "thresholds": {
            "steps": [
              {"value": 0, "color": "red"},
              {"value": 0.3, "color": "orange"},
              {"value": 0.7, "color": "green"}
            ]
          }
        }
      }
    }
  ]
}
